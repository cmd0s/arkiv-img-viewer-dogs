# CDogs Gallery - ARKIV Image Viewer

A web-based image gallery for AI-generated dog images stored on the [ARKIV](https://arkiv.network) blockchain.

## Overview

This application serves as a viewer for images uploaded to the ARKIV decentralized database. Images are generated by a separate Python application using AI (ComfyUI + Qwen 2.5 VL model) and stored on the ARKIV Mendoza testnet.

### Features

- Browse AI-generated dog images from ARKIV blockchain
- Pagination (100 images per page)
- Search by keywords in prompts
- Modal view with full prompt details
- Loading indicators for better UX
- Sorted by newest first

## Tech Stack

| Component | Technology |
|-----------|------------|
| Backend | Node.js + TypeScript (native execution) |
| Frontend | Vanilla HTML/CSS/JS |
| Blockchain | ARKIV Mendoza Testnet |
| SDK | [@arkiv-network/sdk](https://github.com/arkiv-network/arkiv-sdk-js) |

## Requirements

- Node.js 22.10.0+ (uses `--experimental-strip-types`)
- npm

## Installation

```bash
# Clone the repository
git clone <repository-url>
cd arkiv-img-viewer

# Install dependencies
npm install
```

## Configuration

Create a `.env` file with:

```env
RPC_URL=https://mendoza.hoodi.arkiv.network/rpc
ACCOUNT_ADR=<owner-address>
PRIVATE_KEY=<private-key>  # Optional, only for write operations
```

## Usage

```bash
# Start production server (port 8080)
npm start

# Start development server with auto-reload
npm run dev
```

Open http://localhost:8080 in your browser.

## API Endpoints

| Endpoint | Description |
|----------|-------------|
| `GET /` | HTML frontend |
| `GET /api/images` | Paginated image metadata |
| `GET /api/image?key=0x...` | Single image binary |

### Query Parameters for `/api/images`

- `page` - Page number (default: 1)
- `perPage` - Items per page (default: 100)
- `search` - Filter by keyword in prompt

## Architecture

```
arkiv-img-viewer/
├── server.ts          # HTTP server + ARKIV SDK integration
├── public/
│   └── index.html     # Frontend (single-file)
├── package.json
├── .env               # Configuration
└── ARKIV_TUTORIAL.md  # SDK documentation
```

### How it works

1. Backend connects to ARKIV Mendoza testnet via SDK
2. Queries entities filtered by `app="CDogs"` and `type="image"`
3. Caches metadata for 1 minute to reduce RPC calls
4. Frontend lazy-loads individual images to avoid large responses

## Related Projects

### Image Generator (Python)

A separate Python application generates and uploads images:

- Uses [ARKIV Python SDK](https://github.com/arkiv-network/arkiv-sdk-py)
- AI generation with ComfyUI + Qwen 2.5 VL model
- 2.3M+ unique prompt combinations
- Running on NVIDIA RTX 5090
- Continuous generation until all combinations complete

## Links

- [ARKIV Network](https://arkiv.network)
- [ARKIV JavaScript/TypeScript SDK](https://github.com/arkiv-network/arkiv-sdk-js)
- [ARKIV Python SDK](https://github.com/arkiv-network/arkiv-sdk-py)
- [Mendoza Testnet Faucet](https://mendoza.hoodi.arkiv.network/faucet/)

## License

MIT
